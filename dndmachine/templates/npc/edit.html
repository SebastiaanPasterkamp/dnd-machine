{% extends "layout.html" %}
{% block body %}
<h2 class="icon fa-pencil">NPC</h2>

<form action="{{ url_for('npc.edit', npc_id=npc.id) }}" method="post">
    <button name="button" value="save" class="hidden">Hidden</button>

<div id="edit-npc">

    <div id="description" class="nice-panel brand">
        <div class="nice-panel-heading">
            Description
        </div>
        <div class="nice-panel-content">

            <div class="nice-control-group">
                <span class="nice-input-addon">
                    Name
                </span>
                <input type="text" class="nice-form-control" name="npc.name" value="{{ npc.name }}" />
            </div>

            <div class="nice-control-group">
                <span class="nice-input-addon">
                    Gender
                </span>
                <select class="nice-form-control" name="npc.gender">
                    {%- for gender in ['male', 'female', 'genderless'] %}
                    <option value="{{ gender }}">{{ gender|capitalize }}</option>
                    {%- endfor %}
                </select>
            </div>

            <div class="nice-control-group">
                <span class="nice-input-addon">
                    Alignment
                </span>
                <select class="nice-form-control" name="npc.alignment">
                    {%- for group, options in {'good': ['lawful good', 'neutral good', 'chaotic good'], 'neutral': ['lawful neutral', 'true neutral', 'chaotic neutral'], 'evil': ['lawful evil', 'neutral evil', 'chaotic evil']}.items() %}
                    <optgroup label="{{ group|capitalize }}">
                        {%- for option in options %}
                        <option{{ {
                                "selected": "selected" if npc.alignment == option else None,
                                "value": option
                            }|xmlattr }}>{{ option|capitalize }}</option>
                        {%- endfor %}
                    </optgroup>
                    {%- endfor %}
                </select>
            </div>

            <div class="nice-control-group">
                <span class="nice-input-addon">
                    Size
                </span>
                <select class="nice-form-control" name="npc.size">
                {% for size in items.size_hit_dice %}
                    <option{{ {
                            "selected": "selected" if npc.size == size.name else None,
                            "value": size.name
                            }|xmlattr }}>
                        {{ size.label }}
                    </option>
                {% endfor %}
                </select>
            </div>

            <div class="nice-control-group">
                <span class="nice-input-addon">
                    Level
                </span>
                <select class="nice-form-control" name="npc.level">
                {% for level in range(1, 31) %}
                    {% if level == npc.level %}
                    <option selected>{{ level }}</option>
                    {% else %}
                    <option>{{ level }}</option>
                    {% endif %}
                {% endfor %}
                </select>
            </div>

            <div class="nice-control-group">
                <span class="nice-input-addon">
                    Description
                </span>
                <textarea rows="10" class="small nice-form-control" name="npc.description" placeholder="Description...">{{ npc.description }}</textarea>
            </div>
        </div>
    </div>

    <div id="save">
        <button name="button" value="cancel" class="nice-btn muted icon fa-ban">Cancel</button>
        <button name="button" value="update" class="nice-btn info icon fa-refresh">Update</button>
        <button name="button" value="save" class="nice-btn primary icon fa-save">Save</button>
    </div>
</div>

</form>
{% endblock %}
