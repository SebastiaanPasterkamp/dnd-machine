{% extends "layout.html" %}
{% block body %}
<h2 class="icon fa-users">Party</h2>

<div class="nice-row">
    <div class="nice-col-6 nice-col-mobile-12">

<table class="nice-table condensed striped bordered hover">
    <thead>
        <tr>
            <th colspan="2" class="control-wrapper">
                <h3>{{ party.name }}</h3>

                {% if 'dm' in request.user.role and party.user_id == request.user.id %}
                <div class="nice-btn-group object-control">
                    <a href="{{ url_for('party.edit', party_id=party.id) }}" class="nice-btn icon fa-cog">Edit</a>
                    <a href="{{ url_for('party.delete', party_id=party.id) }}" class="nice-btn icon bad fa-trash">Delete</a>
                </div>
                {% endif %}
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th>Dungeon Master</th>
            <td>{{ user.username }}</td>
        </tr>
        <tr>
            <th>description</th>
            <td>{{ party.description }}</td>
        </tr>
    </tbody>
</table>

    </div>
    <div class="nice-col-6 nice-col-mobile-12">

<h3>Party Encounter Challenge Rating</h3>

<table class="nice-table condensed striped bordered hover" id="party">
    <thead>
        <tr>
            <th>Party size</th>
            <th class="info">Easy</th>
            <th class="good">Medium</th>
            <th class="warning">Hard</th>
            <th class="bad">Deadly</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{ party.size }}</td>
            <td class="info">{{ party.challenge.easy }}XP</td>
            <td class="good">{{ party.challenge.medium }}XP</td>
            <td class="warning">{{ party.challenge.hard }}XP</td>
            <td class="bad">{{ party.challenge.deadly }}XP</td>
        </tr>
    </tbody>
</table>

    </div>
</div>

<h3>Individual Challenge Rating</h3>

<table class="nice-table condensed striped bordered hover" id="character">
    <thead>
        <tr>
            <th>Character Level</th>
            <th>Level</th>
            <th>Easy</th>
            <th>Medium</th>
            <th>Hard</th>
            <th>Deadly</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for character in characters %}
        <tr>
            <td>{{ character.name }}</td>
            <td>{{ character.level }}</td>
            <td class="info">{{ character.challenge.easy }}XP</td>
            <td class="good">{{ character.challenge.medium }}XP</td>
            <td class="warning">{{ character.challenge.hard }}XP</td>
            <td class="bad">{{ character.challenge.deadly }}XP</td>
            <td>
                <div class="nice-btn-group pull-right">
                    <a href="{{ url_for('character.show', character_id=character.id, party_id=party.id) }}" class="nice-btn icon fa-eye">View</a>
                    {% if 'dm' in request.user.role and party.user_id == request.user.id %}
                    <a href="{{ url_for('party.modify_members', party_id=party.id, action='del', character_id=character.id) }}" class="nice-btn bad icon fa-times">Remove</a>
                    {% endif %}
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
    {% if 'dm' in request.user.role and party.user_id == request.user.id %}
    <tfooter>
        <tr>
            <td colspan="6"></td>
            <td>
                <div class="nice-btn-group pull-right">
                    <a href="{{ url_for('character.overview', party_id=party.id) }}" class="nice-btn accent icon fa-plus">Add Character</a>
                </div>
            </td>
        </tr>
    </tfooter>
    {% endif %}
</table>
{% endblock %}
